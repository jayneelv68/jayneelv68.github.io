<html>

<script>
function sgenerate_bits() {
var str="";
var s=document.getElementById("param_s").value ;
for(var i=1;i<=s;i++)
{var val=2;
if(Math.random()>0.5){val=1;}
else{val=0;}
str+=val.toString();

}
  document.getElementById("abits").value = str;
}


function sgenerate_basis() {
var str="";
var s=document.getElementById("param_s").value ;
for(var i=1;i<=s;i++)
{
str+=['x','+'][Math.floor(Math.random() * 2)];

}
  document.getElementById("abasis").value = str;
}
function rgenerate_basis() {
var str="";
var s=document.getElementById("param_s").value ;
for(var i=1;i<=s;i++)
{
str+=['x','+'][Math.floor(Math.random() * 2)];

}
  document.getElementById("bbasis").value = str;
}
function s_encode() {

bits=document.getElementById("abits").value.split("");
basis= document.getElementById("abasis").value.split("");
var enc="";
for(var i=0;i<bits.length;i++){ 
if (bits[i]=='0'){ 
	if (basis[i]=='+'){enc+="H";}
	else{enc+="D";}}
else{
if (basis[i]=='+'){enc+="V";}
	else{enc+="A";}
}

}
  document.getElementById("aencode").value =enc;
}

function bsend(){
document.getElementById("pchannel").value=document.getElementById("bbasis").value;
document.getElementById("rabasis").value =document.getElementById("pchannel").value;

}


function asend(){
document.getElementById("pchannel").value=document.getElementById("abasis").value;
document.getElementById("rbbasis").value =document.getElementById("pchannel").value;

}


function r_decode() {

bits=document.getElementById("recieved").value.split("");
basis= document.getElementById("bbasis").value.split("");
var enc="";
for(var i=0;i<bits.length;i++){ 
if (bits[i]=='D'){ 
	if (basis[i]=='+'){enc+="-";}
	else{enc+="0";}}
else if (bits[i]=='V'){ 
	if (basis[i]=='+'){enc+="1";}
	else{enc+="-";}}
else if (bits[i]=='H'){ 
	if (basis[i]=='+'){enc+="0";}
	else{enc+="-";}}

else{
if (basis[i]=='+'){enc+="-";}
	else{enc+="1";}}
}

  document.getElementById("bdecode").value =enc;
}

function acomp(){
key="";
var alice= document.getElementById("abasis").value.split("");
var bob= document.getElementById("rabasis").value.split("");
bits=document.getElementById("abits").value.split("")
for(var i=0;i<alice.length;i++)
{
if(alice[i]==bob[i]){ key+=bits[i]; }
}
document.getElementById("akey").value=key;
}

function bcomp(){
key="";
var alice= document.getElementById("bbasis").value.split("");
var bob= document.getElementById("rbbasis").value.split("");
bits=document.getElementById("bdecode").value.split("")
for(var i=0;i<alice.length;i++)
{
if(alice[i]==bob[i]){ 
if (bits[i]=='0'){key+='0';}
else if (bits[i]=='-'){key+='';}
else {key+='1';}
 }
}
document.getElementById("bkey").value=key;
}


function send_bits(){

document.getElementById("qchannel").value =document.getElementById("aencode").value;
}

function rread_enc(){
document.getElementById("recieved").value =document.getElementById("qchannel").value;
}
</script>


<body>
<a href="235b.html">Home</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="b84.html">BB84 protocol</a><tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="b92.html">B92 protocol </a><t>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="qbc_ber.html">Quantum Bit Commitment </a>



<table style="border: 1px solid;border-collapse: collapse;width: 100%;padding: 5px; text-align: left; ">
<tr>
	<td colspan="2"   style="text-align: center; ">Agreed value of s is<input type="text" id="param_s" value="10"> .</td>
</tr>

<tr>
<td colspan="2" style="text-align: center; ">PUBLIC CHANNEL:<input type="text" id="pchannel"></td>
</tr>

<tr>
<td colspan="2" style="text-align: center; "> QUANTUM CHANNEL:<input type="text" id="qchannel"></td>
</tr>

<tr> 
<td> Alice </td>      <td> Bob </td>
</tr>

<tr> 
<td> <button onclick="sgenerate_bits()">generate random bits</button>  </td>     
 <td><button onclick="rread_enc()">read from channel</button></td>
</tr>


<tr> 
<td> display bits <br>
<input type="text" id="abits"></td> 
<td> Recieved polarization<br>
<input type="text" id="recieved"></td> 
</tr>


<tr> 
<td> <button onclick="sgenerate_basis()">create random basis</button>  </td>  
<td> <button onclick="rgenerate_basis()">create random basis</button>  </td>      
</tr>


<tr> 
<td> display basis<br> <input type="text" id="abasis"> </td>     
<td> display basis<br> <input type="text" id="bbasis"> </td> 
</tr>
<tr> 
<td> <button onclick="s_encode()">encode onto polarization</button>  </td>     
<td> <button onclick="r_decode()">decode polarizations</button>  </td>  
</tr>


<tr> 
<td> encoded bits to send:<br> <input type="text" id="aencode"> </td>     
<td> decode bits :<br> <input type="text" id="bdecode"> </td>  
</tr>

<tr> 
<td> <button onclick="send_bits()">send encoded bits</button>  </td>      <td> Bob </td>
</tr>



<tr> 
<td> Recieved basis from Bob <input type="text" id="rabasis"> </td>     
<td> <button onclick="bsend()">Send basis to Alice</button>  </td> 
</tr>

<tr> 
<td> <button onclick="asend()">Send basis to Bob</button>  </td> 
<td> Recieved basis from Alice <input type="text" id="rbbasis">  </td>     

</tr>
<tr> 
<td> <button onclick="acomp()">Compare basis and generate key</button>   </p> </td>     
<td> <button onclick="bcomp()">Compare basis and generate key</button>  </td> 
</tr>
<tr> 
<td> Key generated:<br> <input type="text" id="akey"> </td>     
<td> Key generated:<br> <input type="text" id="bkey"> </td>    
</tr>


</table>
</body>
</html>