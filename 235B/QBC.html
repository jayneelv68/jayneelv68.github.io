<html>
<title>
Quantum Bit Commitment.
</title>
<script>
function agenerate_basis() {
var str="";
var s=document.getElementById("param_s").value ;
for(var i=1;i<=s;i++)
{
str+=['X','+'][Math.floor(Math.random() * 2)];

}
document.getElementById("abasis").value = str;
}
function bgenerate_basis() {
var str="";
var s=document.getElementById("param_s").value ;
for(var i=1;i<=s;i++)
{
str+=['X','+'][Math.floor(Math.random() * 2)];

}
  document.getElementById("bbasis").value = str;
}
function b_decode() {
seq="";
bits=document.getElementById("recieved").value.split("");
basis= document.getElementById("bbasis").value.split("");
var enc="";

for(var i=0;i<bits.length;i++){ 
if (bits[i]=='D')
	{ 
		if (basis[i]=='+')
		{
			if(Math.random()>0.5)
				{enc+="0";			}
			else
				{enc+="-";}
		}
else{enc+="0";}
}

else if (bits[i]=='V'){ 
		if (basis[i]=='+'){encr+="1<br>";
							encd+="-<br>";
				rect+=1;
				diag+=0;
				seq+="1";}
		else{ 
			if(Math.random()>0.5){enc+="1";}
			else{enc+="-";}
			}
			}
			
else if (bits[i]=='H'){ 

		if (basis[i]=='+'){encr+="0<br>";
							encd+="-<br>";
				seq+="0";}
		else{ 
			if(Math.random()>0.5){enc+="0";}
			else{enc+="-";}
			}
	}

else{


		if (basis[i]=='+')
		{
			if(Math.random()>0.5)
				{enc+="1";}
			else
				{enc+="-";}
		}
else{enc+="1";}

}
}
   document.getElementById("bdecode").value =enc;
 }
}

function xb_decode() {

bits=document.getElementById("recieved").value.split("");
basis= document.getElementById("bbasis").value.split("");
var enc="";
for(var i=0;i<bits.length;i++){ 
if (bits[i]=='D'){ 
	if (basis[i]=='+'){enc+="V";}
	else{enc+="D";}}
else if (bits[i]=='V'){ 
	if (basis[i]=='+'){enc+="V";}
	else{enc+="D";}}
else if (bits[i]=='H'){ 
	if (basis[i]=='+'){enc+="H";}
	else{enc+="A";}}

else{
if (basis[i]=='+'){enc+="V";}
	else{enc+="A";}}
}

  document.getElementById("bdecode").value =enc;
}
function zgenerate_bit(){
document.getElementById("bit").value=0;
}

function ogenerate_bit(){
document.getElementById("bit").value=1;
}
function rgenerate_bit(){
var val=0;
if(Math.random()>0.5){val=1;}
document.getElementById("bit").value=val;
}

function a_encode() {

var s=document.getElementById("param_s").value;
var bit=document.getElementById("bit").value;

basis= document.getElementById("abasis").value.split("");
var enc="";
for(var i=0;i<s;i++){ 
if (bit='0'){ 
	if (basis[i]=='+'){enc+="H";}
	else{enc+="D";}}
else{
if (basis[i]=='+'){enc+="V";}
	else{enc+="A";}
}

}
  document.getElementById("aencode").value =enc;
}

function asend_bits(){

document.getElementById("qchannel").value =document.getElementById("aencode").value;
}
function b_read_qc(){
document.getElementById("recieved").value =document.getElementById("qchannel").value;
}

</script>

<body>
<table border="2">

<tr>
	<td>Alice</td>
	<td>Bob</td>
</tr>

<tr>
	<td colspan="2">Agreed value of s is<input type="text" id="param_s" value="10"> .</td>
</tr>

<tr>
	<td>Choose bit to committ: <button onclick="zgenerate_bit()">0</button> or <button onclick="ogenerate_bit()">1</button> or <button onclick="rgenerate_bit()">random</button><br>
	Chosen bit: <input type="text" id="bit" > </td>
	<td></td>
</tr>

<tr>
	<td> <button onclick="agenerate_basis()">create random basis</button> <br>
	 display basis<br> <input type="text" id="abasis"> </td> 
	 <td></td> 

</tr>
<tr>
	<td> <button onclick="a_encode()">encode onto polarization</button>     
	<br>encoded bits to send:<br> <input type="text" id="aencode"> </td>  <td>  </td> 
</tr>

<tr> 
	<td> <button onclick="asend_bits()">send encoded bits via quantum channel.</button>  </td>      
	<td>  </td>
</tr>

<tr>
	<td colspan="2" style="text-align: center; "">PUBLIC CHANNEL:<input type="text" id="pchannel"></td>
</tr>

<tr>
	<td colspan="2" style="text-align: center; ""> QUANTUM CHANNEL:<input type="text" id="qchannel"></td>
</tr>

<tr>
	<td></td>
	<td><button onclick="b_read_qc()">read encoding from channel</button></td>
<tr>	
	<td></td>
	<td> Recieved polarization<br>
	<input type="text" id="recieved"></td> 
</tr>
<tr>	
	<td></td>
	<td>
		<button onclick="bgenerate_basis()">create random basis</button><br>
		display basis<br> <input type="text" id="bbasis"> <br>
		<button onclick="b_decode()">decode polarizations</button> <br>
		decoded bits :<br> <input type="text" id="bdecode"> 
	</td>
</tr>
 
 </table>
</body>
</html>
